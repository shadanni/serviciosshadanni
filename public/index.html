<!DOCTYPE html>
<html lang="es">
<head>
      
	  
      <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    	<meta name="description" content="Este es un documento HTML5">
    	<meta name="keywords" content="HTML, CSS, JavaScript">
    	<link rel="stylesheet" href="misestilos.css">
	<title>HinojosaS</title>    

</head>
  <body id=articulosprincipales”>
    
    <!DOCTYPE html>
    <html lang="es">
    <head>
    
        <center>
          <title>HinojosaS</title>
        <body background ="G:\Mi pagina web\Mi pagina\imagenes\f1.jpg" bigcolor="FECB">
          <meta charset="utf-8">
          <meta name="description" content="Este es un documento HTML5">
          <meta name="keywords" content="HTML, CSS, JavaScript">
          <link rel="stylesheet" href="misestilos.css">
        </center>
    </head>
      <body>
      <header id="cabeceralogo">
        <center>
          <div>
            <h1>Servicios</h1>
          </div>
        </center>
      </header>
    
    <main>
      <div>
        <section id="articulosprincipales">
          <h1>Servicios</h1>
      <form action="javascript:ciudad();">
        <table>
            <tr>
                <th colspan="2">Estado</th>
            </tr>
            <tr>
                <td>Ingresa el estado al que ir:
                        <select id="visitas">
                            <!-- Opciones de la lista -->
                            <option value="1">Guanajuato</option>
                            <option value="2">Jalisco</option>
                            <option value="3">Michoacan</option>
                          </select>
                          <td>Ingrese su edad: 
            <input type="number" value="18" min="18"
                            max="60" id="edad"/>
                            
                
            </tr>
         
        </table>
      <button type="submit"> CONSULTAR </button>
      </form>
        <footer>Copyright &copy; 2020 Hinojosa Sanchez Shadanni Lissette.</footer>
      <script>
        //@ts-check
    
        /** Envía los datos a la función en Internet. El modificador async indica
         * que la función probablemente no termine en el hilo principal y algunas
         * de sus instrucciones continuen en otro hilo. En este caso, como la
         * comunicación con el servidor puede ser tardada se realiza en otro hilo.
         * Se devuelve un objeto de tipo Promise que sirve para saber cuando la
         * función termina correctamente o con error en algún momento futuro.
         * @returns {Promise} para indicar cuando termina correctamente o con
         *  error. */
        async function ciudad() {
          try {
            /** La función fetch envía los datos al servidor. El texto que recibe
             * como parámetro es la url que se invoca. El signo de interrogación
             * "?" permite pasarle parámetros y encodeURIComponent formatea la
             * información para que se puede colocar en la URL. El signo "&"
             * separa los parámetros. En este caso se envían los parámetros
             * "nombre1" y "nombre2", tomados de la interfaz gráfica.
             * nombre1.value.trim() toma la captura de id="nombre1" y le quita los
             *        espacios y saltos de línea al inicio y al final.
             * fetch lanza la comunicación con el servidor en otro hilo, devuelve
             * una Promise para saber en que momento termina y trata de seguir a
             * la siguiente instrucción antes que la comunicación termine.
             * El operador await fuerza a esperar que la Promise indique el final
             * de la operación y toma la respuesta devuelta por el servidor.
             * @type {Response} */
            const respuestaHttp =
              await fetch("ciudad?visitas="
                // @ts-ignore
                
                + encodeURIComponent(visitas.value.trim())
                // @ts-ignore
                + "&edad=" + encodeURIComponent(edad.value.trim()));
            /* La property ok de la respuesta vale true si la conexión terminó
             * con éxito. */
            if (respuestaHttp.ok) {
              /* En esta parte del if, la conexión terminó con éxito. Hay que
               * mostrar el texto del servidor usando la instrucción
               * respuestaHttp.text(); como este proceso puede ser tardado,
               * se ejecuta en otro hilo y devuelve una Promise. Con await espera
               * a que termine este proceso. */
              const texto = await respuestaHttp.text();
              alert(texto);
            } else {
              /* En esta parte del if, la conexión termina con errores. Se
               * lanza una excepción que es atrapada por la función del
               * catch en la línea 109. La expresión respuestaHttp.statusText
               * devuelve un texto describiendo el error, que normalmente está
               * en inglés. */
              throw new Error(respuestaHttp.statusText)
            }
          } catch (e) {
            alert(e.message)
          }
        }
      </script>
      </section>
      </div>
      </main>
      <footer id="pielogo">

        <div>
          
          <section class="seccionpie">
            
            <small>&copy; Hinojosa Sanchez Shadanni Lissette 2020</small>
          </section>
        </div>
      </footer>
    </body>
   
    </html>